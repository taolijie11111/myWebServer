# 关于http请求

## 基础知识

### epoll 函数
* 创建文件描述符：epoll_create
* epoll_ctl:该函数用于操作内核事件表监控的文件描述符上的事件：注册、修改、删除
* epoll_wait:该函数用于等待所监控文件描述符上有事件的产生，返回就绪的文件描述符个数

### 触发模式
* LT水平触发方式：下一次实现
* ET边缘触发方式：立即处理事件

### http报文格式
* 请求报文
* 响应报文

### http状态码
* 1xx：指示信息--表示请求已接收，继续处理。

* 2xx：成功--表示请求正常处理完毕。

    * 200 OK：客户端请求被正常处理。

    * 206 Partial content：客户端进行了范围请求。

* 3xx：重定向--要完成请求必须进行更进一步的操作。

    * 301 Moved Permanently：永久重定向，该资源已被永久移动到新位置，将来任何对该资源的访问都要使用本响应返回的若干个URI之一。

    * 302 Found：临时重定向，请求的资源现在临时从不同的URI中获得。

* 4xx：客户端错误--请求有语法错误，服务器无法处理请求。

    * 400 Bad Request：请求报文存在语法错误。

    * 403 Forbidden：请求被服务器拒绝。

    * 404 Not Found：请求不存在，服务器上找不到请求的资源。

* 5xx：服务器端错误--服务器处理请求出错。

    * 500 Internal Server Error：服务器在执行请求时出现错误


### 有限状态机
是一种抽象的理论模型，它能够把有限个变量描述的状态变化过程，以可构造可验证的方式呈现出来。比如，封闭的有向图

### http处理流程
* 报文处理：
  * 浏览器端发出http连接请求，主线程创建http对象接收请求并将所有数据读入对应的buffer，将该对象插入任务队列，工作线程从任务队列中取出一个任务进行处理
  * 工作线程取出任务后，调用process_read函数，通过主、从状态机对请求报文进行解析。
  * 解析完之后，跳转do_request函数生成响应报文，通过process_write写入buffer，返回给浏览器端。


